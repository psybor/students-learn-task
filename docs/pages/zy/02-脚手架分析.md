# 02-脚手架分析

## 关键词
- 脚手架
- Lerna
- 架构设计

## 学习方法
- 架构三部曲：掌握原理 -> 独立思考 -> 总结反思
- 深度剖析优秀开源项目，由表及里，由浅入深
- 视角切换：多切换到架构师视角，从全局思考问题

## 注意事项
- 整体难度不高，不用担心学不会，坚持打卡写心得
- 优秀的程序员不止能够实现功能，更能读懂别人的代码，读懂别人的想法
- 从知名开源项目中汲取养分，为我所用，助我成长

## 脚手架实现原理
- 为什么全局安装 `@vue/cli` 后会添加的命令为 `vue` ？
因为 `@vue/cli` 中 `package.json` 的 `bin` 字段，指定了安装的命令为 `vue`。

- 全局安装 `@vue/cli` 时，发生了什么？
    1. 下载 `@vue/cli` 这个包到全局的 `node_modules`。
    2. 然后根据 `package.json` 中的 `bin` 字段，在全局的 `bin` 中生成软链接指向 `@vue/cli`。

- 执行 `vue` 命令时发生了什么？为什么 `vue` 指向一个 `js` 文件，我们却可以直接通过 `vue` 命令去执行他？
首先通过环境变量找到 `vue.js`，然后通过顶部的 `#!/usr/bin/env node` 指定了环境变量里面的 `node` 来执行这个 `js`。

# 脚手架原理进阶
- 为什么脚手架是操作系统的客户端？
因为 `node` 是一个客户端，我们的 `js` 代码只是一个字符串参数。
- 如何为自己编写的 node 脚手架创建别名？
创建软连接 `ln` 命令。
- 描述脚手架执行的整个过程。
在 $PATH 中查询 vue 命令。相当于执行 `which vue`。查找实际链接文件。通过 `/usr/bin/env node` 执行文件。
